## 更改说明


### 2025/03/24
- 增加sw.js缓存 来自CDN的js和css
- 对后`台插件管理`流程 理顺,移除不必要的值以及函数
	- 增加一个插件JSON值 `upload_url` 
	- 查看插件信息时,会尝试进行POST `name:'插件目录名','siteid':''` 
	- 返回值`{data:{},message:''}` data会替换插件信息HTML值显示,message会弹出`$.alert(message)`
- 新增绝对地址以及路由规则
	- `MyApp::site('view/js/xxx')` 会返回当前网站目录的绝对地址(不含主机名) 如根目录则输出 /view/js/xxx
	- `MyApp::path('view/js/xxx')` 会返回绝对的物理路径
	- 因为一旦采用 /thread/21/1.html 这种格式时,原来的相对地址就会存在404文件问题
	- `MyApp::url('xxx')` 同样也会输出一个绝对路径的网址,例如 会输出 /xxx.html,
	- `MyApp::url('xxx.js')` 会输出 /xxx.js, 但是它底层是 访问xxx.inc.php的路由文件,
		- 可以通过 `MyApp::value('extension')` 获取当前网址的扩展名
		- `MyApp::murl('aa.js')` 会根据当前路由名输出如 '/xxx/aa.js';
			- `MyApp::value(0)` == 'aa' 
			- `MyApp::value('module')` == 'xxx'
	- 一个可以WEB访问的物理路径可以通过 `MyApp::convert_site($root)` 转为可访问的WEB绝对地址

### 移除
- 移除后台 获取远程插件等设置
- xiunophp/cache_apc.class.php
- xiunophp/cache_memcached.class.php
- xiunophp/cache_mysql.class.php
- xiunophp/cache_yac.class.php
- xiunophp/cache_xcache.class.php
- xiunophp/db_mysql.class.php
- xiunophp/db_pdo_mongodb.class.php
- xiunophp/db_pdo_mysql.class.php
- xiunophp/db_pdo_sqlite.class.php
- xiunophp/pingyin.func.php
- xiunophp/xn_zip_old.func.php
- xiunophp/xn_zip.func.php

### 新增
- xiunophp/class/MyApp.class.php 公共参数读取,未替代 $_SERVER 储存数据替代
- xiunophp/class/MyDB.class.php 数据库链接控制
- xiunophp/class/MyTable.class.php 表操作类,SQL预处理,输出标准化的SQL语句
- xiunophp/class/driver/MySQL.class.php mysqli初始化类
- xiunophp/class/driver/MyPDO.class.php pdo初始化类 

### 更改
- 对tmp文件夹分类摆放
- 对db_xx等函数进行切换至预处理模式(预处理可以理解为SQL防注入的手段之一)
- PHPMailer 独立出来并且更新至最新版
### 新查询数据手法
```php
#查询所有数据
MyDB::t('user')->select();
#分页
MyDB::t('user')->select(MyDB::LIMIT(10)); //10条
MyDB::t('user')->select(MyDB::LIMIT(2,10)); //第二页开始的10条
#只查询单个数据
MyDB::t('user')->selectFirst(); //1条单维数据  array('uid'=>...)
MyDB::t('user')->select('',[],4); //1条单维数据  array('uid'=>...)
#插件安装时 增加字段应该先检测
$columns = MyDB::t('user')->columns();
if(!in_array('vip',$columns)):
	MyDB::t('user')->alert(' ADD `vip`');
else:
	$keyinfo = MyDB::t('user')->column_key('vip');
	#获取VIP字段信息 是否进行升级?
endif;
#是否索引字段
MyDB::t('user')->show_index_type('uid');

```
### 数据库操作返回模式
- 1带字段所引的所有数据
- 2数字索引返回所有数据(数字是表的顺序,非常不靠谱)
- 3是1&2混合
- 4单条字段索引
- 5单条数字索引
- 6 4&5混合
- 7 单条首列字段值 常用于获取行数,maxi等
- 10 返回数据结果的迭代器,迭代器可以foreach不可当成变量读取值,迭代器好处是是,当查询结果内容超过PHP内存上限的时候,迭代结果是依次读取